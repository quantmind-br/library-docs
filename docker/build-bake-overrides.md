---
title: Overriding configurations
url: https://docs.docker.com/build/bake/overrides/
source: llms
fetched_at: 2026-01-24T14:15:20.241675498-03:00
rendered_js: false
word_count: 653
summary: This document explains the various methods for overriding build definitions and target attributes in Docker Bake using files, CLI flags, and environment variables.
tags:
    - docker-bake
    - buildx
    - configuration-overrides
    - cli-flags
    - environment-variables
    - build-automation
category: guide
---

Bake supports loading build definitions from files, but sometimes you need even more flexibility to configure these definitions. For example, you might want to override an attribute when building in a particular environment or for a specific target.

The following list of attributes can be overridden:

- `args`
- `attest`
- `cache-from`
- `cache-to`
- `context`
- `contexts`
- `dockerfile`
- `entitlements`
- `labels`
- `network`
- `no-cache`
- `output`
- `platform`
- `pull`
- `secrets`
- `ssh`
- `tags`
- `target`

To override these attributes, you can use the following methods:

- [File overrides](#file-overrides)
- [CLI overrides](#command-line)
- [Environment variable overrides](#environment-variables)

You can load multiple Bake files that define build configurations for your targets. This is useful when you want to separate configurations into different files for better organization, or to conditionally override configurations based on which files are loaded.

### [Default file lookup](#default-file-lookup)

You can use the `--file` or `-f` flag to specify which files to load. If you don't specify any files, Bake will use the following lookup order:

1. `compose.yaml`
2. `compose.yml`
3. `docker-compose.yml`
4. `docker-compose.yaml`
5. `docker-bake.json`
6. `docker-bake.hcl`
7. `docker-bake.override.json`
8. `docker-bake.override.hcl`

If more than one Bake file is found, all files are loaded and merged into a single definition. Files are merged according to the lookup order.

If merged files contain duplicate attribute definitions, those definitions are either merged or overridden by the last occurrence, depending on the attribute.

Bake will attempt to load all of the files in the order they are found. If multiple files define the same target, attributes are either merged or overridden. In the case of overrides, the last one loaded takes precedence.

For example, given the following files:

Since `docker-bake.override.hcl` is loaded last in the default lookup order, the `TAG` variable is overridden with the value `bar`.

### [Manual file overrides](#manual-file-overrides)

You can use the `--file` flag to explicitly specify which files to load, and use this as a way to conditionally apply override files.

For example, you can create a file that defines a set of configurations for a specific environment, and load it only when building for that environment. The following example shows how to load an `override.hcl` file that sets the `TAG` variable to `bar`. The `TAG` variable is then used in the `default` target.

Printing the build configuration without the `--file` flag shows the `TAG` variable is set to the default value `foo`.

Using the `--file` flag to load the `overrides.hcl` file overrides the `TAG` variable with the value `bar`.

You can also override target configurations from the command line with the [`--set` flag](https://docs.docker.com/reference/cli/docker/buildx/bake/#set):

> `--set` is a repeatable flag. For array fields such as `tags`, repeat `--set` to provide multiple values or use the `+=` operator to append without replacing. Array literal syntax like `--set target.tags=[a,b]` is not supported.

Pattern matching syntax defined in [https://golang.org/pkg/path/#Match](https://golang.org/pkg/path/#Match) is also supported:

Complete list of attributes that can be overridden with `--set` are:

- `args`
- `attest`
- `cache-from`
- `cache-to`
- `context`
- `contexts`
- `dockerfile`
- `entitlements`
- `labels`
- `network`
- `no-cache`
- `output`
- `platform`
- `pull`
- `secrets`
- `ssh`
- `tags`
- `target`

You can also use environment variables to override configurations.

Bake lets you use environment variables to override the value of a `variable` block. Only `variable` blocks can be overridden with environment variables. This means you need to define the variables in the bake file and then set the environment variable with the same name to override it.

The following example shows how you can define a `TAG` variable with a default value in the Bake file, and override it with an environment variable.

The `TAG` variable is overridden with the value of the environment variable, which is the short commit hash generated by `git rev-parse --short HEAD`.

### [Type coercion](#type-coercion)

Overriding non-string variables with environment variables is supported. Values passed as environment variables are coerced into suitable types first.

The following example defines a `PORT` variable. The `backend` target uses the `PORT` variable as-is, and the `frontend` target uses the value of `PORT` incremented by one.

Overriding `PORT` using an environment variable will first coerce the value into the expected type, an integer, before the expression in the `frontend` target runs.